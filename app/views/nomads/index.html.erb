<div id="map" style="width: 100%; height: 99vh;"></div>

<div class="nomad-count">
  <h1> <%= @nomad_count %> NOMADS </h1>
</div>


<!-- MAPS SCRIPT -->
<% content_for(:after_js) do %>
  <script>
    $(document).ready(function() {
      var handler = Gmaps.build('Google');
      handler.buildMap({
        provider:{
          scrollwheel: false,
          zoomcontrol: true,
          draggable: true,
          styles: <%= render 'map_snazzy_style' %>
        },
        internal:{
          id: 'map'}
      },
      function() {
        markers = handler.addMarkers(<%= raw @nomads_location.to_json %>);
        handler.bounds.extendWith(markers);
        handler.map.centerOn(<%= raw @center_point.to_json %>);
        handler.getMap().setZoom(12);
      });
    });
  </script>
<% end %>


<!-- https://chrome.google.com/webstore/detail/french-digital-nomads-map/aaokjnbicmobnkgjnmbmffbnldebhgfa -->
